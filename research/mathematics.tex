\documentclass[10pt,book,openany]{memoir}
\usepackage[utf8]{inputenc}
\usepackage{epigraph}
\usepackage{geometry}
\usepackage{amsfonts}
\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{cite}
\usepackage[inline]{enumitem}
\usepackage{mathpartir}
\usepackage{thmtools}
\usepackage{imakeidx}
% uncomment to debug page layout
%\usepackage{showframe}
\usepackage[columns=3,font=footnotesize,justific=raggedright,columnsep=1em,indentunit=1em,itemlayout=singlepar]{idxlayout}
\usepackage[hidelinks]{hyperref}
% page size
\setstocksize{9in}{6in}
\settrimmedsize{9in}{6in}{*}
\setlrmarginsandblock{0.625in}{0.5in}{*}
\setulmarginsandblock{0.875in}{0.875in}{*}
\setlength\headsep{2em}
\setlength\footskip{3em}
\checkandfixthelayout
\nouppercaseheads
\chapterstyle{crosshead}
%\raggedright
%\setlength\parindent{2em}
\raggedbottom
% epigraph
\renewcommand\epigraphsize{\scriptsize}
\setlength\epigraphwidth{0.625\textwidth}
\input{format}
% toc
\setlength\cftpartnumwidth{4em}
\setlength\cftchapternumwidth{4em}
\setlength\cftsectionnumwidth{4em}
\setlength\cftsectionindent{0em}
% list, itemize, enumerate vertical spaces
\tightlists
% beforeparaskip leaves too much empty space
\setbeforeparaskip{0em}
\makeindex
\begin{document}
% display-math; doesn't work if put in preamble
\setlength\abovedisplayskip{0em}
\setlength\belowdisplayskip{0em}
\setlength\abovedisplayshortskip{0em}
\setlength\belowdisplayshortskip{0em}
\frontmatter
\input{title}
\newpage
\input{copyright}
\newpage
\input{preface}
\newpage
{%
\setlength\cftbeforepartskip{1em}%
\setlength\cftbeforechapterskip{0em}%
\renewcommand{\contentsname}{Chapters}%
\renewcommand{\cftpartfont}{\normalsize\bfseries}%
\renewcommand{\cftchapterfont}{\normalsize}%
\renewcommand{\cftchapterpagefont}{\normalsize}%
\setcounter{tocdepth}{0}%
\tableofcontents%
\clearpage%
}%
{\setcounter{tocdepth}{3}%
\newpage%
\tableofcontents%
}
\mainmatter
\part{Basic mathematics}
\input{intro}
\input{foundation}
\input{algebra}
\input{vector}
\input{integral}
\input{probability}
\input{statistics}
\input{differential}
\input{graph}
\part{Applied mathematics}
\input{signal}
\input{physics}
\input{finance}
\input{pricing}
\part{Computation}
\input{computation}
\input{computation-old}
\input{type-old}
\input{complexity}
\part{Intelligence}
\input{ai}
\input{solomonoff}
\input{learning}
\input{taxonomy}
\input{approximate}
\input{feedback}
\input{system}
\input{intelligence}
\input{learning}
\input{human}
\part{More mathematics}
\input{number}
\input{nonstandard}
\input{topology}
\input{differential-geometry}
\input{what}
\input{function}
\part{Unsorted mathematical articles}
\input{division}
\input{agent}
\part{Humanities}
\input{government}
\input{economics}
\input{business}
\input{writing}
\part{Other ramblings}
\input{wonderings}
\input{weiqi}
\input{hardware}
\input{humanoid}
\input{opinion}
\part{Closing}
\input{lies}
\input{closing}

% index redirections
\index{DFA|see{deterministic finite automaton}}%
\index{FSM|see{finite-state machine}}%
\index{abelian|see{commutative}}%
\index{probability!space|see{probability space}}%
\index{probability!measure|see{probability measure}}%
\index{measure!probability|see{probability measure}}%
\index{space!probability|see{probability space}}%
\index{equations!system of linear|see{system of linear equations}}%
\index{linear equations!system of|see{system of linear equations}}%
\index{random!variable|see{random variable}}%
\index{random!vector|see{random vector}}%
\index{variable!random|see{random variable}}%
\index{vector!random|see{random vector}}%

\backmatter

\clearpage
\noindexintoc
\addcontentsline{toc}{part}{\indexname}
\printindex

\nocite{LeggPhd}
\nocite{NonParam}
\nocite{negnevitsky2005artificial}
\nocite{izhikevich2006fhn}
\nocite{casella2002statistical}
\nocite{Topology}

\clearpage
\nobibintoc
\addcontentsline{toc}{part}{\bibname}
\bibliography{bib}{}
\bibliographystyle{plain}
\end{document}
