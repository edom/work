\documentclass[10pt,book,openany]{memoir}
\input{format}
% why do we load geometry?
\usepackage{geometry}
%\usepackage{amsfonts}
%\usepackage{amsmath}
%\usepackage{amsthm}
%\usepackage{amssymb}
\usepackage[inline]{enumitem}
\usepackage{mathpartir}
\usepackage{thmtools}
% uncomment to debug page layout
%\usepackage{showframe}
\input{commands}
\newcommand\abs[1]{|#1|}
\newcommand\norm[1]{\lVert#1\rVert}
\makeindex
\begin{document}
% display-math; doesn't work if put in preamble
\setlength\abovedisplayskip{0em}
\setlength\belowdisplayskip{0em}
\setlength\abovedisplayshortskip{0em}
\setlength\belowdisplayshortskip{0em}
\frontmatter
\input{title}
\newpage
\input{copyright}
\newpage
\input{preface}
{%
\newpage%
\setlength\cftbeforepartskip{1em}%
\setlength\cftbeforechapterskip{0em}%
\renewcommand{\contentsname}{Chapters}%
\renewcommand{\cftchapterfont}{\normalsize}%
\renewcommand{\cftchapterpagefont}{\normalsize}%
\setcounter{tocdepth}{0}%
\phantomsection%
\addcontentsline{toc}{part}{\contentsname}%
\tableofcontents*%
\clearpage%
}%
{%
\newpage%
\setcounter{tocdepth}{3}%
\phantomsection%
\addcontentsline{toc}{part}{\contentsname}%
\tableofcontents*%
}
\mainmatter
\part{Basic mathematics}
\input{intro}
\input{foundation}
\input{algebra}
\input{vector}
\input{integral}
\input{probability}
\input{statistics}
\input{differential}
\input{graph}
\part{Applied mathematics}
\input{signal}
\input{physics}
\input{finance}
\input{pricing}
\part{Computation}
\input{computation}
\input{computation-old}
\input{type-old}
\input{complexity}
\part{Intelligence}
\input{ai}
\input{solomonoff}
\input{learning}
\input{taxonomy}
\input{approximate}
\input{feedback}
\input{system}
\input{intelligence}
\input{learning}
\input{human}
\part{More mathematics}
\input{number}
\input{nonstandard}
\input{topology}
\input{differential-geometry}
\input{what}
\input{function}
\input{collatz}
\part{Unsorted mathematical articles}
\input{division}
\input{agent}
\part{Humanities}
\input{government}
\input{economics}
\input{business}
\input{writing}
\part{Other ramblings}
\input{wonderings}
\input{weiqi}
\input{hardware}
\input{humanoid}
\input{opinion}
\part{Closing}
\input{lies}
\input{closing}

% index redirections
\index{DFA|see{deterministic finite automaton}}%
\index{FSM|see{finite-state machine}}%
\index{abelian|see{commutative}}%
\index{probability!space|see{probability space}}%
\index{probability!measure|see{probability measure}}%
\index{measure!probability|see{probability measure}}%
\index{space!probability|see{probability space}}%
\index{equations!system of linear|see{system of linear equations}}%
\index{linear equations!system of|see{system of linear equations}}%
\index{random!variable|see{random variable}}%
\index{random!vector|see{random vector}}%
\index{variable!random|see{random variable}}%
\index{vector!random|see{random vector}}%

\backmatter

\clearpage
\noindexintoc
\printindex
\addcontentsline{toc}{part}{\indexname}

\cite{LeggPhd}
\cite{NonParam}
\cite{negnevitsky2005artificial}
\cite{izhikevich2006fhn}
\cite{casella2002statistical}
\cite{Topology}

\clearpage
\nobibintoc
\bibliography{bib}{}
\bibliographystyle{plain}
\addcontentsline{toc}{part}{\bibname}
\end{document}
